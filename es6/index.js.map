{"version":3,"sources":["../src/index.js"],"names":["sessions","port","allSessions","browser","start","onTargets","targets","Array","isArray","targetSessions","map","id","next","setSessions"],"mappings":";;;+BAKA,WAAqB;AACnBA,eAAW,CAAC,EAAEC,MAAM,MAAR,EAAD,EAAmB,EAAEA,MAAM,MAAR,EAAnB,CADQ;AAEnBA,WAAO;AAFY,MAGjB,EAHJ,EAGQ;AACN,UAAM,wBAASA,IAAT,CAAN;AACA,QAAIC,cAAcF,QAAlB;AACA,UAAMG,UAAU,2BAAY;AAC1BH;AAD0B,KAAZ,CAAhB;AAGAG,YAAQC,KAAR;AACA,yBAAW;AACTC,gBAAUC,UAAU,EAApB,EAAwB;AACtB,YAAI,CAACC,MAAMC,OAAN,CAAcF,OAAd,CAAL,EAA6B;AAC7B,cAAMG,iBAAiBH,QAAQI,GAAR,CAAYC,OAAO,EAAEA,EAAF,EAAMV,IAAN,EAAP,CAAZ,CAAvB;AACA,cAAMW,OAAO,CAAC,GAAGV,WAAJ,EAAiB,GAAGO,cAApB,CAAb;AACAN,gBAAQU,WAAR,CAAoBD,IAApB;AACD;AANQ,KAAX;AAQD,G;;kBAlBcR,K;;;;;AAJf;;;;AACA;;;;AACA;;;;;;;;AAsBAA","file":"index.js","sourcesContent":["\nimport Server from './server'\nimport Browser from './debugBrowser'\nimport killPort from 'kill-port'\n\nasync function start({\n  sessions = [{ port: '9000' }, { port: '9001' }],\n  port = 8000,\n} = {}) {\n  await killPort(port)\n  let allSessions = sessions\n  const browser = new Browser({\n    sessions,\n  })\n  browser.start()\n  new Server({\n    onTargets(targets = []) {\n      if (!Array.isArray(targets)) return\n      const targetSessions = targets.map(id => ({ id, port }))\n      const next = [...allSessions, ...targetSessions]\n      browser.setSessions(next)\n    },\n  })\n}\n\nstart()\n"]}